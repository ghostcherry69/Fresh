<%= render 'layouts/userheader' %>

  <main>
    <div class="container">
      <div class="row">
        <div class="col-xs-3">
          <table class="genre">
            <thead>
            <tr>
              <th>ジャンル検索</th>
            </tr>
            </thead>

            <tbody>
              <% @genres.each do |genre| %>
                <tr>
                  <td>
                    <%= link_to genre.name, public_products_path(genre_id: genre.id) %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>

        <div class="col-xs-9">
          <% if params[:genre_id] %>
            <h3><%= @genre.name %></h3>
            <% if @products.empty? %>
              <p>現在、商品はありません。<p>
            <% end %>
          <% else %>
            <h3>商品一覧</h3>
          <% end %>
            <div class="product-index">
              <% @products.each do |product| %>
                <% if product.is_active == true %>
                  <div class="main-content">
                    <div class="main-img">
                    <%= link_to public_product_path(product.id) do %>
                      <%= attachment_image_tag product, :image, :fill, 100, 100, format: 'jpeg', fallback: "no_image.jpg", size: "100x100"%>
                    <% end %>
                    </div>
                    <div class="main-text">
                      <p>【商品名】</p>
                      <%= product.name %>
                      <p>【税抜価格】</p>
                      <%= product.price_excluding_tax.to_s(:delimited, delimiter: ',') %>
                    </div>
                  </div>
                <% end %>
              <% end %>
            </div>
        </div>
      </div>
    </div>
  </main>

<%= render 'layouts/userfooter' %>